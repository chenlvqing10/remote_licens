<!DOCTYPE HTML>
<html lang="zh-cn">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title class="lang" key="device_setting">设备设置</title>

	<link href="resources/plugins/bootstrap-3.3.0/css/bootstrap.min.css" rel="stylesheet"/>
	<link href="resources/plugins/material-design-iconic-font-2.2.0/css/material-design-iconic-font.min.css" rel="stylesheet"/>
<!--	<link href="resources/plugins/bootstrap-table-1.11.0/bootstrap-table.min.css" rel="stylesheet"/>-->
	<link href="resources/plugins/bootstrap-table-1.17.0/bootstrap-table.min.css" rel="stylesheet"/>
	<link href="resources/plugins/waves-0.7.5/waves.min.css" rel="stylesheet"/>
	<link href="resources/plugins/jquery-confirm/jquery-confirm.min.css" rel="stylesheet"/>
	<link href="resources/plugins/select2/css/select2.min.css" rel="stylesheet"/>

	<link href="resources/css/common.css" rel="stylesheet"/>
	<script src="resources/plugins/jquery.1.12.4.min.js"></script>

	<script src="resources/lang/lang.js"></script>

	<script src="resources/plugins/jquery.1.12.4.min.js"></script>
	<script src="resources/plugins/bootstrap-3.3.0/js/bootstrap.min.js"></script>
	<!--<script src="resources/plugins/bootstrap-table-1.11.0/bootstrap-table.min.js"></script>-->
	<!--<script src="resources/plugins/bootstrap-table-1.11.0/bootstrap-table.js"></script>-->
	<!--<script src="resources/plugins/bootstrap-table-1.11.0/locale/bootstrap-table-zh-CN.min.js"></script>-->
	<!--<script src="resources/plugins/bootstrap-table-1.11.0/locale/bootstrap-table-en-US.min.js"></script>-->
	<script src="resources/plugins/bootstrap-table-1.17.0/bootstrap-table.min.js"></script>
	<script src="resources/plugins/bootstrap-table-1.17.0/locale/bootstrap-table-zh-CN.min.js"></script>
	<script src="resources/plugins/bootstrap-table-1.17.0/locale/bootstrap-table-en-US.min.js"></script>

	<script src="resources/plugins/waves-0.7.5/waves.min.js"></script>
	<script src="resources/plugins/jquery-confirm/jquery-confirm.min.js"></script>
	<script src="resources/plugins/select2/js/select2.min.js"></script>
	<script src="resources/plugins/jquery.cookie.js"></script>
	<link href="resources/plugins/jquery-toastmessage/resources/css/jquery.toastmessage.css" rel="stylesheet"/>
	<script src="resources/plugins/jquery-toastmessage/javascript/jquery.toastmessage.js"></script>
	<script src="resources/js/notify.js"></script>
	<script src="resources/js/common.js"></script>
</head>
<body>
<div >

		<div class="row">
			<div class="col-md-6">
				<div class="panel">
					<div class="panel-heading">
						<h1 class="lang" key="ethernet"> ethernet</h1>
					</div>
					<div class="panel-body container">
						<div class="row">
							<div class="col-md-2">
								<label for="dhcp" >DHCP</label>
							</div>
							<div class="pull-left">
								<input id="is_dhcp" class="net_input" value="0"  type="checkbox">
							</div>
						</div>
						<div class="row">
							<div class="col-md-2">
								<label for="ip" class="lang" key="IPV4">IP address</label>
							</div>
							<div class="pull-left">
								<input id="ip" name="ip" readonly="readonly" class="net_input" value="0.0.0.0"  type="text">
							</div>
						</div>
						<div class="row">
							<div class="col-md-2">
								<label for="mask" class="lang"  key="Mask">Network mask</label>
							</div>
							<div class="pull-left">
								<input id="mask" name="mask" readonly="readonly" class="net_input" value="0.0.0.0"  type="text">
							</div>
						</div>
						<div class="row">
							<div class="col-md-2">
								<label for="gate" class="lang" key="Gateway">Gateway</label>
							</div>
							<div class="pull-left">
								<input id="gate" name="gate" readonly="readonly" class="net_input" value="0.0.0.0"  type="text">
							</div>
						</div>

						<div class="row">
							<div class="col-md-2">
								<label for="dns" class="lang" key="defaultDNS">DNS</label>
							</div>
							<div class="pull-left">
								<input id="dns" name="dns" readonly="readonly"  class="net_input" value="0.0.0.0"  type="text">
							</div>
						</div>
						<div class="row ">
							<div class="form-horizontal">
<!--								<div class="" style="margin-top: 15px">-->
									<button id="save" type="" class="btn btn-danger btn-lg waves-effect waves-float lang"
									key="save">保存</button>
<!--								</div>-->
<!--								<div class="" style="margin-top: 15px">-->
									<button id="refresh" type="" class="btn btn-danger btn-lg waves-effect waves-float lang"
									key="refresh">刷新</button>
<!--								</div>-->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="panel">
					<div class="panel-heading">
						<h1 class="lang" key="wifi"> wifi</h1>
					</div>
					<div class="panel-body">
						<div class="container">
							<label for="enable_wifi" class="lang" key="enable_wifi">Enable WiFi</label>
							<input id="enable_wifi" type="checkbox" value="0">

							<HR>
							<label  for="connected_wifi" class="lang" key="connected_wifi">Connected WiFi</label>
							<input id="connected_wifi" type="text" readonly value="">
						</div>
						<div id="wifi_container">
							<div id="wifi_toolbar"></div>
							<HR>
							<div id="wifi_table"></div>
						</div>
					</div>
					<HR>
					<div class="container">
						<div class="row">
							<div class="col-md-2">
								<label for="ssid" class="lang" key="wifi_name">SSID</label>
							</div>
							<div class="pull-left">
								<input id="ssid" class="wifi_input" value="wifi_123"  type="text" oninput="">
							</div>
						</div>

						<div class="row">
							<div class="col-md-2">
								<label for="key" class="lang" key="wifi_key">Key</label>
							</div>
							<div class="pull-left">
								<input id="pwd" name="pwd" class="wifi_input " value="" minLength="8"
									   type="password"  oninput="">
							</div>
						</div>
						<div class="row">
							<div class="col-md-2">
								<label for="encryption" class="lang" key="wifi_type">Encryption</label>
							</div>
							<div class="pull-left">
								<input id="encryption" name="encryption" readonly="readonly"  class="wifi_input" value="WPA2"  type="text" oninput="">
							</div>
						</div>
						<div class="row">
							<button id="connect" type=""
									class="btn btn-danger btn-lg waves-effect waves-float lang"
									key="connect"
							>连接</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	<div class="modal fade" id="loading" data-backdrop="static">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="lang" key="please_wait">请稍等</h5>
				</div>
				<div class="modal-body">
					<img src="resources/images/loading.gif">
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	lang_load()
	setInterval(function () {
		lang_load_if_change()
	}, 500)
    function net_input_check_run_time(e){
        console.log(e)
        let id = "#" + e.target.id
        let ret = net_input_check($(id).val())
        if (ret == 1){
            notify(window.lang.format_error)
            $(id).focus()
        }
    }
	function net_input_check(value) {
		let ipRegEx = /^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])$/;
        value = value?value:""
		let arr = value.split('.')
		let tmp = [255,255,255,255]
		if ((!ipRegEx.test(value)) ) {
			let i = 0

			arr.map(function (v, idx, arr) {
				let int = parseInt(v)
				if ((!isNaN(int)) && (idx <= 3) && (int <= 255)){
					tmp[idx] = int
				}
			})
			value = ""
			// console.log("tmp :", tmp)
			tmp.map(function (v, idx, tmp) {
				value += v.toString()
				if (idx < 3){
					value += "."
				}
			})
			console.log("bad input:", value)
			//t.value = value
			//
			return 1;
		}
        console.log("net_input_check:", value, "passed")
        return 0
	}
	function waiting(on) {
		if (on){
			$("#loading").modal("show")
		}else{
			function close(){
				$("#loading").modal("hide")
			}
			setTimeout(close, 500)
		}
		console.log("waiting: ", on)



	}
	function update_ethernet_input(ip) {
        is_dhcp = ip["is_dhcp"]
        $("#" + "is_dhcp").prop("checked", is_dhcp)
		for (const v in ip){
			// console.log(v)
			let e = $("input.net_input").filter("#" + v)[0];
			if (e){
				e.value = ip[v]
                $("#" + v)[0].value = ip[v]
				console.log("update_ethernet_input:", v, ip[v], $("#" + v)[0].value)
				if (e.id == "is_dhcp"){
					$("#" + v).prop("checked", ip[v])
				}else{
					if ($("#is_dhcp").prop("checked")){
						//e.value = ""
						//e.disabled = "true"
					}else{
						//e.removeAttribute("disabled")
					}
				}
			}
		}
	}

	function update_ethernet_input_when_failed() {
        let ip = get_ethernet_input()
        console.log("update_ethernet_input_when_failed")
		for (const v in ip){
			// console.log(v)
			let e = $("input.net_input").filter("#" + v)[0];
			if (e){
				e.value = ip[v]
				console.log(v, ip[v])
				if (e.id == "is_dhcp"){
					$("#" + v).prop("checked", ip[v])
				}else{
					if ($("#is_dhcp").prop("checked")){
						//e.value = ""
						//e.disabled = "true"
					}else{
						//e.removeAttribute("disabled")
                        if (1 == net_input_check(e.value)){
                            e.value = "255.255.255.255"
                        }
					}
				}
			}
		}
	}
	function get_ethernet_input(){
		let ip = new Object()
		$("input.net_input").each(function (idx, e) {
			if (e.type == "checkbox"){
				ip[e.id] = Number($("#" + e.id).prop("checked"))
			}else{
				ip[e.id] = $("#" + e.id).val()
			}
		})

		return ip
	}
	function is_ethernet_input_ok(){
        let is_ok = 1
		$("input.net_input").each(function (idx, e) {
			if (e.type == "checkbox"){

			}else{
                if (1 == net_input_check($("#" + e.id).val())){
                    console.log("check ",e, "failed", $("#" + e.id).val())
                    is_ok = 0
                }
			}
		})

		return is_ok
	}
	function get_wifi_input(){
		let ip = new Object()
		$("input.wifi_input").each(function (idx, e) {
			ip[e.id] = e.value
		})
		if (ip["encryption"] == "WPA"){
			ip["encryption"] = 1
		}else if (ip["encryption"] == "WPA2"){
			ip["encryption"] = 2
		}else{
			ip["encryption"] = 0
		}
		return ip
	}
  function set_ethernet_input_edit(){
if ($("#is_dhcp").prop("checked") ) {
			console.log("checked")
            $("#ip").attr("readOnly",true);
			$("#mask").attr("readOnly",true);
			$("#gate").attr("readOnly",true);
            $("#dns").attr("readOnly",true);
		}else{
			console.log("unchecked")
		    $("#ip").attr("readOnly",false);
			$("#mask").attr("readOnly",false);
			$("#gate").attr("readOnly",false);
            $("#dns").attr("readOnly",false);
		}
  }
	
	$("#is_dhcp").change(function () {
		let ip = get_ethernet_input()
		console.log(ip)
		if ($("#is_dhcp").prop("checked") ) {
			console.log("checked")
			ethernet_remote(1)
            $("#ip").attr("readOnly",true);
			$("#mask").attr("readOnly",true);
			$("#gate").attr("readOnly",true);
            $("#dns").attr("readOnly",true);
			// setTimeout(function () {
			// 	update_ethernet_input(ethernet_remote(0))
			// }, 3000)
		}else{
			console.log("unchecked")
		    $("#ip").attr("readOnly",false);
			$("#mask").attr("readOnly",false);
			$("#gate").attr("readOnly",false);
            $("#dns").attr("readOnly",false);
			setTimeout(function () {
                ip = ethernet_remote(0)
                ip["is_dhcp"] = 0
				update_ethernet_input(ip)
			}, 500)
		}
		update_ethernet_input(ip)
		// update_ethernet_input(ip)
	})

	update_ethernet_input(ethernet_remote(0))

	function ethernet_remote(set)
	{
		let ip = get_ethernet_input()
        console.log(ip)
        if ((set == 1) && (1 != is_ethernet_input_ok())){
            //notify(window.lang.format_error)
            update_ethernet_input_when_failed()
            return
        }
		ip["password"] = $.cookie("pwd")
		ip["set"] = set

		waiting(1)
		$.ajax({
			url:  '/IpSetting',
			type: 'POST',
			contentType:"application/json",
			dataType: "json",
			async: false,
			data: JSON.stringify(ip),
			beforeSend: function() {
				waiting(1)
			},
			success: function(json){
				console.log("remote ipsetting resp:" , json)
				ip = json
				waiting(0)
			},
			error: function(error){
				console.log("remote ip error::::", error)
                notify(window.lang.format_error)
				ip = {}
				waiting(0)
			},

		});
		waiting(0)
		return ip
	}

function isEmpty(obj){
    if(typeof obj == "undefined" || obj == null || obj == ""){
        return true;
    }else{
        return false;
    }
}

function isEmptyContent(ip,mask,gateway,dns){
if(isEmpty(ip)&&isEmpty(mask)&&isEmpty(gateway)&&isEmpty(dns)){
return true;
}else{
return false;
}

}

function checkNetIContent(ip,mask,gateway,dns){
 if(net_input_check(ip)==1){
 	let failed = window.lang.ip_check_warn;
	notify(failed);
	return false;
 }else if(net_input_check(mask)==1){
 let failed = window.subnet_mask_check_warn;
	notify(failed);
 return false;
 }else if(net_input_check(gateway)==1){
let failed = window.lang.gateway_check_warn;
	notify(failed);
 return false;
 }else if(net_input_check(dns)==1){
  let failed = window.lang.dns_check_warn;
	notify(failed);
   return false;
 }
 return true;
}

	$("#save").click(function () {
	var ip=$("#ip").val();
    var mask=$("#mask").val();
    var gateway=$("#gate").val();
    var dns=$("#dns").val();
    console.log(ip);
	console.log(mask);
	console.log(gateway);
    console.log(dns);
	
	  if(isEmptyContent(ip,mask,gateway,dns)){
        let failed = window.lang.wired_network_value_empty_warn;
	  notify(failed);
		 return;
	  }
	  if(!checkNetIContent(ip,mask,gateway,dns)){
		 return;
	  	}
	  
		ethernet_remote(1)
	})

	$("#refresh").click(function () {
		update_ethernet_input(ethernet_remote(0))
	})

	let table_init = [

			{"ssid": "aaa",
				"channel": "1",
				"strength": "100",
				"encryption":"wpa"},
			{"ssid": "bbb",
				"channel": "2",
				"strength": "100",
				"encryption":"wpa"},
			{"ssid": "ccc",
				"channel": "3",
				"strength": "100",
				"encryption":"wpa"},
			{"ssid": "ddd",
				"channel": "4",
				"strength": "100",
				"encryption":"wpa"},
	]
	//locales['en-US'] locales['zh-CN']
	function to_table_lang() {
		let c = lang_idx()
		let l = "zh-CN"
		if (c == 0){
			l = "zh-CN"
		}else{
			l = "en-US"
		}
		console.log("to_table_lang:", l)
		return l
	}

	function table_columns() {
		return [
			{checkbox: true},
			{field: 'ssid', title: window.lang.wifi_name, sortable: true, halign: 'center'},
			{field: 'channel', title: window.lang.channel, sortable: true, halign: 'center'},
			{field: 'strength', title: window.lang.signal_strength, sortable: true, halign: 'center'},
			{field: 'encryption', title: window.lang.wifi_type, sortable: true, halign: 'center'},
		]
	}
	let $table = $('#wifi_table');
	let wifi_data = []
	let wifi_talbe_lang = 0

	let wifi_table_init_para = {
		// url: 'resources/data/data1.json',
		url: "getScanWifiResults",
		// url: "recvTest",
		data: wifi_data,
		method: 'post',
		// height: getHeight(),
		height: 400,
		striped: true,
		// search: true,
		// searchOnEnterKey: true,
		showRefresh: true,
		// showToggle: true,
		showColumns: true,
		minimumCountColumns: 2,
		// showPaginationSwitch: true,
		clickToSelect: true,
		singleSelect: true,
		// detailView: true,
		detailFormatter: 'detailFormatter',
		pagination: true,
		paginationLoop: false,
		classes: 'table table-hover table-no-bordered',
		//sidePagination: 'server',
		//silentSort: false,
		smartDisplay: false,
		idField: 'ssid',
		sortName: 'ssid',
		sortOrder: 'desc',
		escape: true,
		// searchOnEnterKey: true,
		idField: 'systemId',
		maintainSelected: true,
		toolbar: '#wifi_toolbar',
		columns:table_columns(),
		// columns: [
		// 	{checkbox: true},
		// 	{field: 'ssid', title: window.lang.wifi_name, sortable: true, halign: 'center'},
		// 	{field: 'channel', title: window.lang.channel, sortable: true, halign: 'center'},
		// 	{field: 'strength', title: window.lang.signal_strength, sortable: true, halign: 'center'},
		// 	{field: 'encryption', title: window.lang.wifi_type, sortable: true, halign: 'center'},
		// ],
		queryParams: function (params){
			let temp = {
				raws: params.limit,
				sort: params.sort,
				sortOrder: params.order,
				password: $.cookie("pwd"),
			}
			return temp
		},
		onCheck: wifi_table_check,
		onUncheck: wifi_table_uncheck,
		// onRefresh: 0,
		onLoadError: function () {
			$('#wifi_table').bootstrapTable("load", [])
		},
		onLoadSuccess:function () {
			$("#enable_wifi").prop("checked", true)
		},
		formatLoadingMessage:function () {
			return  window.lang.loading
		},
		locale: to_table_lang(),
	}
	$('#wifi_table').bootstrapTable(wifi_table_init_para)



	function table_lang_check(){
		let c = lang_idx()
		let l = "zh-CN"
		if (c != wifi_talbe_lang){
			wifi_talbe_lang = c

			wifi_table_init_para.locale = to_table_lang()
			wifi_table_init_para.columns = table_columns()
			// console.log("table lang change:", wifi_table_init_para.locale,  $('.bootstrap-table'))
			//$table.innerHTML
			$('#wifi_table').bootstrapTable("destroy")
			$('.bootstrap-table').bootstrapTable("destroy")
			$().bootstrapTable("destroy")

			$('#wifi_container').append("<div id='wifi_table'> </div>")
			// console.log("table lang change1111:", wifi_table_init_para.locale,  $('.bootstrap-table'))
			// setTimeout(function () {
				$('#wifi_table').bootstrapTable(wifi_table_init_para)
				// console.log("table lang change222:", wifi_table_init_para.locale,  $('.bootstrap-table'), $('#wifi_table'))
			// }, 2000)


		}
	}

	setInterval(table_lang_check, 500)

	function wifi_table_check(row, ele) {
		// console.log(row, ele)
		for (const v in row){
			let e = $("input.wifi_input").filter("#" + v)[0];
			// console.log(v, e)
			if (e){
				e.value = row[v]
			}
		}
        let e = $("input.wifi_input").filter("#" + "pwd")[0];
        if (e){
            e.value = ""
        }
	}
	function wifi_table_uncheck(row, ele) {

	}

	$("#enable_wifi").change(function () {
		function action() {
			let wifi = 0
			if ($("#enable_wifi").prop("checked"))
			{
				wifi = 1
			}else{
				wifi = 0
			}
			waiting(1)
			let send = new Object()
			send["is_enable"] = wifi
			send["password"] = $.cookie("pwd")
			function do_work() {
				$.ajax({
					url:  '/setWifiState',
					type: 'POST',
					async: false,
					contentType:"application/json",
					dataType: "json",
					data: JSON.stringify(send),
					beforeSend: function() {

					},
					success: function(json){
						console.log(json, wifi)
						let scan_failed = 0
						if (0 == wifi){
							$table.bootstrapTable("load", [])
							update_connected_wifi()
						}else{
							let send = new Object()
							send["password"] = $.cookie("pwd")

							$.ajax({
								url:  '/getScanWifiResults',
								type: 'POST',
								async: false,
								contentType:"application/json",
								dataType: "json",
								data: JSON.stringify(send),
								beforeSend: function() {

								},
								success: function(json){
									console.log(json)
									$table.bootstrapTable("load", json)

								},
								error: function(error){
									console.log("scan wifi error::::",error);
									scan_failed = 1

								},
								always: function () {
								}
							})
						}
						waiting(0)
						if (scan_failed){
							notify(window.lang.wifi_scan_failed)
						}
					},
					error: function(req, text, error){
						console.log("enable wifi error::::",req);
						waiting(0)
						notify(window.lang.wifi_enable_failed)
						update_connected_wifi()
					},
					always: function () {
					},
				})
			}
			setTimeout(do_work, 500)
			//do_work()

		}
		action()
		//setTimeout(action, 100)
	})
  function get_wifi_password(){
		let pwd = new Object()
		$("input.pwd").each(function (idx, e) {
			pwd[e.id] = e.value
		})
		console.log(pwd);
		return pwd;
	}


	$("#connect").click(function () {
    var pwd=$("#pwd").val();
    var encryption=$("#encryption").val();
	console.log(encryption);
    if(!(encryption=="OPEN")){
		console.log("1111sss");
     if(pwd.toString().length<8){
	 	let fieid=window.lang.wifi_password_length_warn;
         notify(fieid);
     return false
	}
	}
	  waiting(1)
		function action() {    
			let wifi = get_wifi_input()
			let failed = window.lang.unknown_error
			wifi["password"] = $.cookie("pwd")
			$.ajax({
				url:  '/connectWifi',
				type: 'POST',
				async: false,
				contentType:"application/json",
				dataType: "json",
				data: JSON.stringify(wifi),
				beforeSend: function() {
                   
				},
				success: function(json){
					console.log(json)
					if (json.failed == 5){ //WIFI_STATION_CONNECTED
						update_connected_wifi(json["connected_wifi"])
						failed = window.lang.connect_success
					}else if (json.failed == 9){ //WIFI_STATION_UNAVAILABLE
						failed = window.lang.net_not_exist
					}else if (json.failed == 8){ //WIFI_STATION_AUTHENTICATING_ERROR
						failed = window.lang.password_wrong
					/*
					}else if (json.failed == 5){
						failed = window.lang.connect_reject
					*/
					}else if (json.failed == 0 || json.failed == 10){ //WIFI_STATION_IDLE || WIFI_STATION_FAILED
						failed = window.lang.connect_fail
					}
					notify(failed)
				},
				error: function(error){
					console.log("connect wifi error::::",error);
					notify(failed)
					update_connected_wifi()
				},
				always: function () {
				}
			})
			waiting(0)
		}
		setTimeout(action, 500)
	});

		

	function update_connected_wifi(ssid)
	{
		$("#connected_wifi").val(ssid||"")
	}

	function update_wifi_input(state) {
		console.log(state)
		for (const v in state){
			if (v == "enable_wifi"){
				$('#enable_wifi').val(state["enable_wifi"])
			}else if (v == "connected_ssid"){
				update_connected_wifi(state["connected_ssid"])
			}
		}
	}

	get_wifi_state()

	function get_wifi_state()
	{
		let send = new Object()
		send["password"] = $.cookie("pwd")

		$.ajax({
			url:  '/getWifiState',
			type: 'POST',
			async: false,
			contentType:"application/json",
			dataType: "json",
			data: JSON.stringify(send),
			beforeSend: function() {

			},
			success: function(json){
				console.log(json)
				update_wifi_input(json)

			},
			error: function(error){
				console.log("scan wifi error::::",error);


			},
			always: function () {
			}
		})
	}
	simulation_delay = 1000*60
	function wifi_enable() {

		let state = $("#enable_wifi").prop("checked")
		console.log("wifi_enable:", state)
		if (!state){
			document.getElementById("enable_wifi").click()
		}

		setTimeout(wifi_connect, simulation_delay)
	}

	function wifi_connect() {
		console.log("wifi_connect:")
		document.getElementById("connect").click()
		setTimeout(wifi_disable, simulation_delay)
	}

	function wifi_disable() {
		let state = $("#enable_wifi").prop("checked")
		console.log("wifi_disable:", state)
		if (state){
			document.getElementById("enable_wifi").click()
		}
		setTimeout(wifi_enable, simulation_delay)
	}


	function simulation(){
		wifi_enable()
	}

	//simulation()


</script>
</body>
</html>
